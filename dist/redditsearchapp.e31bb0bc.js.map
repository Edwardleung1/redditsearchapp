{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","err","console","log","searchForm","document","getElementById","searchInput","addEventListener","e","value","querySelector","showMessage","reddit","results","output","forEach","post","image","preview","images","source","url","title","truncateText","selftext","subreddit","score","innerHTML","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substring"],"mappings":"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","file":"redditsearchapp.e31bb0bc.js","sourceRoot":"..","sourcesContent":["// make our reddit api request\nexport default {\n  search: function (searchTerm, searchLimit, sortBy) {\n    return fetch(`http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`)\n      .then((res) => res.json())\n      .then((data) => data.data.children.map((data) => data.data))\n      .catch((err) => console.log(err));\n  },\n};\n","// import reddit\nimport reddit from \"./redditapi\";\n\n// element selector\n// 1. Search-form\nconst searchForm = document.getElementById(\"search-form\");\n// 2. Search-input\nconst searchInput = document.getElementById(\"search-input\");\n\n// addEventlistener when SUBMIT form\nsearchForm.addEventListener(\"submit\", (e) => {\n  // get search input value\n  const searchTerm = searchInput.value;\n  // get CHECKED sort (checkboxes)\n  const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\n  // get limit\n  const searchLimit = document.getElementById(\"limit\").value;\n\n  // check input in form\n  if (searchTerm === \"\") {\n    // show alert bootstrap message\n    showMessage(\"Please add a search term\", \"alert-danger\");\n  }\n\n  // clear input\n  searchInput.value = \"\";\n\n  // search Reddit, passing it to our reddit search function\n  reddit.search(searchTerm, searchLimit, sortBy).then((results) => {\n    // output results to UI\n    let output = `<div class=\"card-columns\">`;\n    // loop through posts\n    results.forEach((post) => {\n      // check for image is available\n      const image = post.preview ? post.preview.images[0].source.url : \"https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg\";\n\n      output += `\n      <div class=\"card mb-2\">\n        <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">${post.title}</h5>\n          <p class=\"card-text\">${truncateText(post.selftext, 100)}</p>\n          <a href=\"${post.url}\" target=\"_blank\" class=\"btn btn-primary\">Read More</a>\n          <hr>\n          <span class=\"badge badge-secondary\">Subreddit: ${post.subreddit}</span>\n          <span class=\"badge badge-dark\">Score: ${post.score}</span>\n        </div>\n      </div>\n      `;\n    });\n\n    // add ending div\n    output += \"</div>\";\n\n    // output card to UI\n    document.getElementById(\"results\").innerHTML = output;\n  });\n\n  // prevent form from submitting\n  e.preventDefault();\n});\n\n// show message alert\nfunction showMessage(message, className) {\n  // create alert div from scratch (DOM manipulation)\n  const div = document.createElement(\"div\");\n  // add class\n  div.className = `alert ${className}`;\n  // add text\n  div.appendChild(document.createTextNode(message));\n  // get parent container\n  const searchContainer = document.getElementById(\"search-container\");\n  // get search (before)\n  const search = document.getElementById(\"search\");\n\n  // insert div message alert before search element\n  searchContainer.insertBefore(div, search);\n\n  // remove timeout alert div after 3s\n  setTimeout(() => {\n    document.querySelector(\".alert\").remove();\n  }, 3000);\n}\n\n// Truncate Text\nfunction truncateText(text, limit) {\n  // making sure its end of a word \" \"\n  const shortened = text.indexOf(\" \", limit);\n  // if it doesn't match a space it will return -1\n  if (shortened == -1) return text;\n  return text.substring(0, shortened);\n}\n"]}